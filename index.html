<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CPU Scheduler</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="container">
    <h1>CPU Scheduler</h1>
    <form id="processForm">
        <label for="schedulerType">Scheduler Type:</label>
        <select id="schedulerType" required>
            <option value="fcfs">FCFS</option>
            <option value="sjfPreemptive">SJF Preemptive</option>
            <option value="sjfNonPreemptive">SJF Non-preemptive</option>
            <option value="rr">Round Robin (RR)</option>
        </select>
        
        <label for="timeQuantum">Time Quantum:</label>
        <input type="number" id="timeQuantum" required>
        
        <label for="numProcesses">Number of Processes:</label>
        <input type="number" id="numProcesses" required>
        
        <div id="processInputs"></div>
        
        <button type="button" onclick="addProcess()">Add Process</button><br><br>
        
        <button type="button" onclick="scheduleProcesses()">Schedule Processes</button>
    </form>
    
    <h2>Processes</h2>
    <table id="processTable">
        <thead>
            <tr>
                <th>Scheduler Type</th>
                <th>Process ID</th>
                <th>Arrival Time</th>
                <th>Burst Time</th>
                <th>Completion Time</th>
                <th>Turnaround Time</th>
                <th>Waiting Time</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    
    <div id="results"></div>
</div>

<script>
    function addProcess() {
        const numProcesses = document.getElementById('numProcesses').value;
        const processInputs = document.getElementById('processInputs');
        
        processInputs.innerHTML = '';
        
        for (let i = 0; i < numProcesses; i++) {
            processInputs.innerHTML += `
                <div>
                    <label for="processId${i}">Process ID:</label>
                    <input type="text" id="processId${i}" required>
                    
                    <label for="arrivalTime${i}">Arrival Time:</label>
                    <input type="number" id="arrivalTime${i}" required>
                    
                    <label for="burstTime${i}">Burst Time:</label>
                    <input type="number" id="burstTime${i}" required>
                </div>
            `;
        }
    }

    function scheduleProcesses() {
        const schedulerType = document.getElementById('schedulerType').value;
        const timeQuantum = document.getElementById('timeQuantum').value;
        const numProcesses = document.getElementById('numProcesses').value;
        
        const processes = [];
        
        for (let i = 0; i < numProcesses; i++) {
            const processId = document.getElementById(`processId${i}`).value;
            const arrivalTime = document.getElementById(`arrivalTime${i}`).value;
            const burstTime = document.getElementById(`burstTime${i}`).value;
            
            processes.push({
                processId,
                arrivalTime,
                burstTime
            });
        }
        
        fetch('/schedule', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                schedulerType,
                timeQuantum,
                processes
            })
        })
        .then(response => response.json())
        .then(data => {
            console.log('Success:', data);
            // Display the results in the table
            const resultsTable = document.querySelector('#processTable tbody');
            resultsTable.innerHTML = '';

            data.forEach(result => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${result.schedulerType}</td>
                    <td>${result.processId}</td>
                    <td>${result.arrivalTime}</td>
                    <td>${result.burstTime}</td>
                    <td>${result.completionTime}</td>
                    <td>${result.turnaroundTime}</td>
                    <td>${result.waitingTime}</td>
                `;
                resultsTable.appendChild(row);
            });

            document.getElementById('results').innerText = JSON.stringify(data, null, 2);
        })
        .catch((error) => {
            console.error('Error:', error);
        });
    }
</script>
</body>
</html>

